import{i as f}from"./backend-94c38ddf.js";import{r as d,q as w,B as h,o as y,c as g,a as e,w as s,v as c,C as M,_ as k,g as V,F as A,D as U,p as C,d as q}from"./index-ad2ebd01.js";import{M as S}from"./modal-d6bc2b8c.js";import"./component-functions-597a3c45.js";const D={class:"modal-dialog",role:"document"},I={class:"modal-content"},N=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"文章"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),B={class:"modal-body"},P={class:"mb-3"},T=e("label",{for:"title"},"標題",-1),$={class:"mb-3"},F=e("label",{for:"description"},"內容",-1),L={class:"mb-3"},j=e("label",{for:"image"},"圖片",-1),E={class:"mb-3"},O=e("label",{for:"tag"},"標籤",-1),z=e("label",{for:"create_at"},"建立時間",-1),G={class:"mb-3"},H=e("label",{for:"author"},"作者",-1),J={class:"mb-3"},K=e("label",{for:"isPublic"},"是否公開",-1),Q={class:"mb-3"},R=e("label",{for:"content"},"內容",-1),W=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),X={__name:"NewArticle",props:{temp_time:{type:Number}},emits:["update-article"],setup(r,{expose:_,emit:v}){const u=r,m=d(null),p=d({}),t=d({}),i=d(null),n=()=>{p.value.show()},l=()=>{p.value.hide()};w(()=>{p.value=new S(m.value)}),_({myModal_show:n,myModal_hide:l});function x(){v("update-article",t.value)}return h(()=>u.temp_time,()=>{const b=new Date(u.temp_time*1e3).toISOString().split("T");i.value=b[0]},{deep:!0}),h(()=>i.value,()=>{t.value.create_at=Math.floor(new Date(i.value)/1e3)},{deep:!0}),(b,a)=>(y(),g("div",{class:"modal fade",id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref_key:"modal",ref:m},[e("div",D,[e("div",I,[N,e("div",B,[e("div",P,[T,s(e("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":a[0]||(a[0]=o=>t.value.title=o),placeholder:"請輸入標題"},null,512),[[c,t.value.title]])]),e("div",$,[F,s(e("textarea",{class:"form-control","onUpdate:modelValue":a[1]||(a[1]=o=>t.value.description=o),required:"",id:"description"},null,512),[[c,t.value.description]])]),e("div",L,[j,s(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=o=>t.value.image=o),id:"image"},null,512),[[c,t.value.image]])]),e("div",E,[O,s(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=o=>t.value.tag=o),required:"",id:"tag"},null,512),[[c,t.value.tag]])]),e("div",null,[z,s(e("input",{class:"form-control",type:"date","onUpdate:modelValue":a[4]||(a[4]=o=>i.value=o),required:"",id:"create_at"},null,512),[[c,i.value]])]),e("div",G,[H,s(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=o=>t.value.author=o),required:"",id:"author"},null,512),[[c,t.value.author]])]),e("div",J,[K,s(e("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=o=>t.value.isPublic=o),id:"isPublic"},null,512),[[M,t.value.isPublic]])]),e("div",Q,[R,s(e("textarea",{class:"form-control","onUpdate:modelValue":a[7]||(a[7]=o=>t.value.content=o),required:"",id:"content"},null,512),[[c,t.value.content]])])]),e("div",{class:"modal-footer"},[W,e("button",{type:"button",class:"btn btn-primary",onClick:x},"更新文章 ")])])])],512))}};const Y=r=>(C("data-v-e1570c7d"),r=r(),q(),r),Z=Y(()=>e("span",null,[e("strong",null,"全部文章")],-1)),ee=U('<br data-v-e1570c7d><div class="row" data-v-e1570c7d><div class="col-sm-3 mb-4" data-v-e1570c7d><div class="card" data-v-e1570c7d><div class="card-body" data-v-e1570c7d><h5 class="card-title" data-v-e1570c7d>tietle</h5><p class="card-text" data-v-e1570c7d>description</p><button class="btn btn-primary" data-v-e1570c7d>detail</button></div></div></div></div>',2),te={__name:"ArtiCle",setup(r){const _=d(1),v=d({}),u=d(),m=d(null);async function p(n=1){try{_.value=n;const l=await f.get(`api/karabo-api-cake/admin/articles?page=${_.value}`);console.log(l)}catch(l){console.log(l)}}async function t(n){try{console.log(n),v.value=n;const l=await f.post("api/karabo-api-cake/admin/article",{data:v.value});console.log(l),await p(),u.value.myModal_hide()}catch(l){console.log(l)}}function i(){u.value.myModal_show(),m.value=new Date().getTime()/1e3}return p(),(n,l)=>(y(),g(A,null,[e("div",{class:"container-fluid"},[e("div",{class:"d-flex justify-content-around bg-dark text-white mt-2 py-2"},[Z,e("button",{onClick:i},"新增文章")]),ee]),V(X,{ref_key:"new_article",ref:u,onUpdateArticle:t,temp_time:m.value},null,8,["temp_time"])],64))}},de=k(te,[["__scopeId","data-v-e1570c7d"]]);export{de as default};

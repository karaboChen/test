import{k as m,f as d,r as f,o as a,c as l,b,a as t,m as y,F as r,g,t as s,h as k}from"./index-7e59a937.js";import{i}from"./backend-c2d93911.js";const x={class:"my-5 row justify-content-center"},w=["onSubmit"],L={class:"table align-middle"},B=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1),C={class:"text-end"},N=t("td",{colspan:"2",class:"text-end"},"總計",-1),S={class:"text-end"},V={class:"table"},E=t("th",{width:"100"},"Email",-1),F=t("th",null,"姓名",-1),I=t("th",null,"收件人電話",-1),O=t("th",null,"收件人地址",-1),$=t("th",null,"付款狀態",-1),j={key:0},q={key:1,class:"text-success"},D={key:0,class:"text-end"},M=t("button",{class:"btn btn-danger"},"確認付款去",-1),R=[M],H={__name:"UserCheckout",setup(U){const _=m(),h=d(!1),n=d(""),e=d({user:{}});async function u(){const c=await i.get(`api/karabo-api-cake/order/${n.value}`);c.data.success&&(e.value=c.data.order,console.log(e.value))}async function p(){(await i.post(`api/karabo-api-cake/pay/${n.value}`)).data.success&&await u()}return n.value=_.params.orderId,console.log(n.value),u(),(c,z)=>{const v=f("Load-ing");return a(),l(r,null,[b(v,{active:h.value},null,8,["active"]),t("div",x,[t("form",{class:"col-md-6",onSubmit:y(p,["prevent"])},[t("table",L,[B,t("tbody",null,[(a(!0),l(r,null,g(e.value.products,o=>(a(),l("tr",{key:o.id},[t("td",null,s(o.product.title),1),t("td",null,s(o.qty)+"/"+s(o.product.unit),1),t("td",C,s(o.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[N,t("td",S,s(e.value.total),1)])])]),t("table",V,[t("tbody",null,[t("tr",null,[E,t("td",null,s(e.value.user.email),1)]),t("tr",null,[F,t("td",null,s(e.value.user.name),1)]),t("tr",null,[I,t("td",null,s(e.value.user.tel),1)]),t("tr",null,[O,t("td",null,s(e.value.user.address),1)]),t("tr",null,[$,t("td",null,[e.value.is_paid?(a(),l("span",q,"付款完成")):(a(),l("span",j,"尚未付款"))])])])]),e.value.is_paid===!1?(a(),l("div",D,R)):k("",!0)],40,w)])],64)}}};export{H as default};
